'\" t
.\"___INFO__MARK_BEGIN__
.\"
.\" Copyright: 2004 by Sun Microsystems, Inc.
.\"
.\"___INFO__MARK_END__
.\" $RCSfile: sge_priority.5,v $     Last Update: $Date: 2004-04-19 10:52:10 $     Revision: $Revision: 1.4 $
.\"
.\"
.\" Some handy macro definitions [from Tom Christensen's man(1) manual page].
.\"
.de SB		\" small and bold
.if !"\\$1"" \\s-2\\fB\&\\$1\\s0\\fR\\$2 \\$3 \\$4 \\$5
..
.\"
.de T		\" switch to typewriter font
.ft CW		\" probably want CW if you don't have TA font
..
.\"
.de TY		\" put $1 in typewriter font
.if t .T
.if n ``\c
\\$1\c
.if t .ft P
.if n \&''\c
\\$2
..
.\"
.de M		\" man page reference
\\fI\\$1\\fR\\|(\\$2)\\$3
..
.TH SGE_PRIORITY 5 "$Date: 2004-04-19 10:52:10 $" "xxRELxx" "xxQS_NAMExx File Formats"
.\"
.SH NAME
sge_priority \- xxQS_NAMExx job priorities
.\"
.\"
.SH DESCRIPTION
The SGE_PRIORITY man page describes means in xxQS_NAMExx for controlling 
job priorities. 
.PP
xxQS_NAMExx provide means for controlling 
job dispatch and run-time priorities. The dispatch priority is about
the importance of pending jobs compared with each other and 
determines the order in which xxQS_NAMExx dispatches jobs to 
queues instances. The run-time priority is about the operating system
priorities of running jobs that influences the CPU allocation which the
operating system assigns to jobs.
.\"
.\"
.SS "\fBJOBS DISPATCH PRIORITY\fP"
.\"
.\"
A job's dispatch priority is affected by the job's 
.M submit 1 
-p priority, the job's submit time and on the policy set-up. The overall 
dispatch priority set-up specifies how priority values ("prio") 
of jobs are dynamically computed and they are derived from the ticket
policy and the urgency policy. 
The 
.M sched_conf 5 
parameters \fBweight_ticket\fP and \fBweight_urgency\fP are used to 
control to what degree the ticket policy resp. urgency policy shall be
in effect. To facilitate easier control, the dynamically determined values
("tckts"/"urg") for both policies are normalized ("ntckts"/"nurg") before
they are used to calculate job priorities ("prio"):

   prio    = nurg * weight_urgency + weight_ticket * ntckts
   nurg    = normalized(urg)
   ntckts  = normalized(tckts)

Normalizing maps the available urgency/ticket values into a range between 0
and 1.  The higher a jobs dynamic priority value the earlier it gets an
assignment.
.\"
.\"
.PP
.\" urgency policy
The urgency policy defines an urgency value for each job. The 
urgency value 

   urg     =  rrcontr + wtcontr + dlcontr

consists of the resource requirement contribution ("rrcontr"), the waiting 
time contribution ("wtcontr") and the deadline contribution ("dlcontr").
.PP
The resource requirement contribution is adding up all resource
requirements of a job into a single numeric value.

   rrcontr = Sum over all(hrr)

with an "hrr" for each hard resource request.
Depending on the resource type two different methods are used to 
determine the value to be used for "hrr" here. For numeric type resource
requests the "hrr" representes how much of a resource a job requests (on a
per-slot basis and on how many slots) and how "important" this resource is
considered in comparison to other resources. This is expressed by the
formula:

   hrr      = rurg * assumed_slot_allocation * request

with the resources urgency value ("rurg") as specified 
under \fBurgency\fP in 
.M complex 5 , 
the job's assumed_slot_allocation representing the number of slots a job
supposedly gets and the per slot request as 
specified using the -l 
.M qsub 1
option. For string type requests the formula is simply

   hrr      = "rurg"

and directly assigns the resource urgency value
as specified under \fBurgency\fP in 
.M complex 5 . 
.PP
The waiting time contribution represents a weighted weighting time of the
jobs

   wtcontr = waiting_time * waiting_weight

with the waiting time in seconds and the \fBwaiting_weight\fP value 
as specified in 
.M sched_conf 5 .
.PP
The deadline contribution has an increasing effect as jobs approach their
deadline initiation time (see the -dl option in
.M qsub 1 ).
It is defined as the quotient of the \fBweight_deadline\fP 
value from
.M sched_conf 5
and the (steadily decreasing) free time in seconds until deadline
initiation time

   dlcontr = wheight_deadline / free_time

or is set to 0 for non-deadline jobs.
.\"
.\"
.PP
.\" ticket policy
The ticket policy unites functional, override and share tree 
policies in the ticket value ("tckts") being defined as the sum of the
specific ticket values ("ftckt"/"otckt"/"stckt") for each sub-policy 

    tckts = ftckt + otckt + stckt

The ticket policies provide a broad range of means for influencing
both job dispatch and runtime priorities on a per job, per user, per
project, and per department basis. See the xxQS_NAMExx
Installation and Administration Guide for details.
.\"
.\"
.SS "\fBJOB RUN-TIME PRIORITY\fP"
The run-time priority can be dynamically adjusted 
in order to meet the goals set with the ticket policy. Dynamic run-time
priority adjustment can be turned off globally using
\fBreprioritize_interval\fP in
.M sched_conf 5
or on a per host basis by using the \fBexecd_params\fP setting
\fBNO_REPRIORITIZATION\fP in the corresponding host configuration
.M sge_conf 5 ).
If no dynamic run-time priority adjustment is done 
at a host level, the \fBpriority\fP specification in 
.M queue_conf 5
is in effect.
.PP
.SH "SEE ALSO"
.M xxqs_name_sxx_intro 1 ,
.M complex 5 ,
.M qstat 1 ,
.M qsub 1 ,
.M sched_conf 5 ,
.M sge_conf 5
.I xxQS_NAMExx Installation and Administration Guide
.\"
.SH "COPYRIGHT"
See
.M xxqs_name_sxx_intro 1
for a full statement of rights and permissions.
